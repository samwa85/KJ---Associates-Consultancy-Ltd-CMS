<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Insights, news, and expert advice on quantity surveying, construction cost management, and project management in Tanzania.">
    <meta name="keywords" content="quantity surveying blog, construction news Tanzania, cost management tips, project management insights">
    <title>Blog | KJ & Associates Consultancy Ltd</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#0d4d2c', light: '#1a7a47', dark: '#083d22' },
                        accent: { DEFAULT: '#d4a855', light: '#e8c882', dark: '#b8923e' },
                    },
                },
            },
        }
    </script>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/themes.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Blog Page Specific Styles */
        
        /* Blog Categories Filter */
        .blog-categories {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            padding: 2rem 0;
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .category-btn {
            padding: 0.6rem 1.5rem;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .category-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        /* Blog Grid */
        .blog-section {
            padding: 4rem 0;
            background: white;
        }
        
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }
        
        /* Featured Post */
        .featured-post {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 2rem;
            background: var(--gray-50);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .featured-post .post-image {
            height: 400px;
        }
        
        .featured-post .post-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .featured-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent);
            color: var(--primary-dark);
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            width: fit-content;
        }
        
        .featured-post .post-title {
            font-size: 2rem;
            line-height: 1.3;
        }
        
        .featured-post .post-excerpt {
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        /* Blog Card */
        .blog-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .blog-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }
        
        .blog-card .post-image {
            height: 220px;
            overflow: hidden;
        }
        
        .blog-card .post-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .blog-card:hover .post-image img {
            transform: scale(1.08);
        }
        
        .blog-card .post-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .post-category {
            display: inline-block;
            background: rgba(26, 122, 71, 0.1);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
            width: fit-content;
        }
        
        .post-title {
            font-size: 1.35rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            transition: color 0.3s ease;
        }
        
        .blog-card:hover .post-title {
            color: var(--primary);
        }
        
        .post-excerpt {
            color: var(--gray-600);
            line-height: 1.7;
            margin-bottom: 1.25rem;
            flex: 1;
        }
        
        .post-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
            font-size: 0.85rem;
            color: var(--gray-500);
        }
        
        .post-author {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .post-author img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .post-date {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .read-more-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            margin-top: auto;
            transition: gap 0.3s ease;
        }
        
        .read-more-link:hover {
            gap: 0.75rem;
        }
        
        /* Search Box */
        .blog-search {
            max-width: 500px;
            margin: 2rem auto 0;
            position: relative;
        }
        
        .blog-search input {
            width: 100%;
            padding: 1rem 1.5rem 1rem 3rem;
            border: 2px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            font-size: 1rem;
            color: white;
            transition: all 0.3s ease;
        }
        
        .blog-search input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .blog-search input:focus {
            outline: none;
            border-color: rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.15);
        }
        
        .blog-search svg {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: rgba(255,255,255,0.7);
        }
        
        /* Empty State */
        .no-posts {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--gray-500);
        }
        
        .no-posts svg {
            width: 80px;
            height: 80px;
            margin-bottom: 1.5rem;
            opacity: 0.5;
        }
        
        .no-posts h3 {
            font-size: 1.5rem;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
        }
        
        /* Pagination */
        .blog-pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }
        
        .pagination-btn {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--gray-200);
            background: white;
            border-radius: 10px;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .pagination-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .pagination-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .pagination-btn.nav-btn {
            width: auto;
            padding: 0 1rem;
            gap: 0.5rem;
        }
        
        /* Responsive */
        @media (max-width: 900px) {
            .featured-post {
                grid-template-columns: 1fr;
            }
            
            .featured-post .post-image {
                height: 300px;
            }
            
            .blog-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 600px) {
            .blog-categories {
                padding: 1.5rem 1rem;
            }
            
            .category-btn {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
            }
        }
    </style>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <a href="../index.html" class="logo">
                    <span class="logo-text">KJ & Associates</span>
                    <span class="logo-subtitle">Consultancy Ltd</span>
                </a>
                <button class="mobile-menu-toggle" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-menu">
                    <li><a href="../index.html">Home</a></li>
                    <li class="dropdown">
                        <a href="../about.html">About Us <span class="dropdown-arrow">‚ñº</span></a>
                        <ul class="dropdown-menu">
                            <li><a href="../about.html#profile">Company Profile</a></li>
                            <li><a href="../about.html#directors-message">Managing Director's Message</a></li>
                            <li><a href="../about.html#board">Board of Directors</a></li>
                            <li><a href="../about.html#team">Leadership & Team</a></li>
                            <li><a href="../about.html#structure">Organization Structure</a></li>
                            <li><a href="../about.html#technology">Technology & Tools</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="../services/index.html">Services <span class="dropdown-arrow">‚ñº</span></a>
                        <ul class="dropdown-menu">
                            <li><a href="../services/index.html#pre-contract">Pre-Contract Services</a></li>
                            <li><a href="../services/index.html#post-contract">Post-Contract Services</a></li>
                            <li><a href="../services/index.html#tendering">Tendering & Contract Documentation</a></li>
                            <li><a href="../services/index.html#dispute">Dispute / Claims Support</a></li>
                        </ul>
                    </li>
                    <li><a href="../projects/index.html">Projects</a></li>
                    <li><a href="../clients.html">Clients</a></li>
                    <li><a href="../certifications.html">Certifications</a></li>
                    <li><a href="index.html" class="active">Blog</a></li>
                    <li><a href="../contact.html" class="btn-primary">Contact Us</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Insights & News</h1>
            <p>Expert advice on quantity surveying, construction cost management, and industry trends in Tanzania</p>
            <div class="blog-search">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                </svg>
                <input type="text" id="blogSearch" placeholder="Search articles..." oninput="filterBlogPosts()">
            </div>
        </div>
    </section>

    <!-- Categories Filter -->
    <div class="blog-categories">
        <button class="category-btn active" data-category="all" onclick="filterByCategory('all')">All Posts</button>
        <button class="category-btn" data-category="industry-insights" onclick="filterByCategory('industry-insights')">Industry Insights</button>
        <button class="category-btn" data-category="project-spotlight" onclick="filterByCategory('project-spotlight')">Project Spotlights</button>
        <button class="category-btn" data-category="cost-management" onclick="filterByCategory('cost-management')">Cost Management</button>
        <button class="category-btn" data-category="regulations" onclick="filterByCategory('regulations')">Regulations</button>
        <button class="category-btn" data-category="company-news" onclick="filterByCategory('company-news')">Company News</button>
    </div>

    <!-- Blog Posts Grid -->
    <section class="blog-section">
        <div class="container">
            <div class="blog-grid" id="blogGrid">
                <!-- Blog posts will be loaded dynamically -->
            </div>
            
            <div class="no-posts" id="noPosts" style="display: none;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                </svg>
                <h3>No posts found</h3>
                <p>Try adjusting your search or filter criteria</p>
            </div>
            
            <div class="blog-pagination" id="blogPagination">
                <!-- Pagination will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <h2>Have a Question?</h2>
            <p>Our team is ready to help with your quantity surveying and project management needs.</p>
            <a href="../contact.html" class="btn btn-white btn-lg">Get in Touch Today</a>
        </div>
    </section>

    <!-- WhatsApp Floating Button -->
    <a href="#" id="whatsappBtn" class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat on WhatsApp">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
        </svg>
        <span class="whatsapp-tooltip">Chat with us</span>
    </a>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" aria-label="Back to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>KJ & Associates</h3>
                    <p>Quantity Surveyors & Construction Project Managers serving Tanzania with excellence for 17+ years.</p>
                    <p class="footer-location"><i data-lucide="map-pin" class="inline-icon"></i> KIJITONYAMA, MABATINI ROAD<br>DAR ES SALAAM, TANZANIA</p>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="../about.html">About Us</a></li>
                        <li><a href="../services/index.html">Services</a></li>
                        <li><a href="../projects/index.html">Projects</a></li>
                        <li><a href="../clients.html">Clients</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="index.html">Blog</a></li>
                        <li><a href="../certifications.html">Certifications</a></li>
                        <li><a href="../contact.html">Contact Us</a></li>
                        <li><a href="../privacy.html">Privacy Policy</a></li>
                        <li><a href="../terms.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact</h4>
                    <p><i data-lucide="mail" class="inline-icon"></i> <a href="mailto:md@kjconsultancy.co.tz">md@kjconsultancy.co.tz</a></p>
                    <p><i data-lucide="mail" class="inline-icon"></i> <a href="mailto:info@kjconsultancy.co.tz">info@kjconsultancy.co.tz</a></p>
                    <p><i data-lucide="phone" class="inline-icon"></i> <a href="tel:+255768757779">+255 768 757 779</a></p>
                    <div class="social-links">
                        <a href="#" aria-label="LinkedIn">in</a>
                        <a href="#" aria-label="Facebook">f</a>
                        <a href="#" aria-label="Twitter">ùïè</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <script>document.write(new Date().getFullYear())</script> KJ & Associates Consultancy Ltd. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/config.js"></script>
    <script src="../js/main.js"></script>
    <script>
        // Blog-specific JavaScript
        let allPosts = [];
        let currentCategory = 'all';
        let currentPage = 1;
        const postsPerPage = 6;

        // Load blog posts from CMS (prefers API data from main.js)
        async function loadBlogPosts() {
            allPosts = [];

            // Prefer API-loaded data
            try {
                const cmsData = await (window.cmsDataReady || Promise.resolve(null));
                if (cmsData && Array.isArray(cmsData.blog)) {
                    allPosts = cmsData.blog;
                    console.log('[Blog] Using API-backed posts', allPosts.length);
                }
            } catch (e) {
                console.warn('[Blog] Failed to read cmsDataReady', e);
            }

            // Fallback to cached localStorage only if API data unavailable
            if ((!allPosts || allPosts.length === 0) && localStorage.getItem('kj_cms_data')) {
                try {
                    const cached = JSON.parse(localStorage.getItem('kj_cms_data'));
                    allPosts = cached.blog || [];
                    console.log('[Blog] Using cached posts', allPosts.length);
                } catch (e) {
                    console.error('[Blog] Error parsing cached CMS data:', e);
                }
            }

            // Final fallback to defaults
            if (!allPosts || allPosts.length === 0) {
                allPosts = getDefaultPosts();
                console.log('[Blog] Using default sample posts');
            }

            renderBlogPosts();
        }

        // Default sample posts
        function getDefaultPosts() {
            return [
                {
                    id: 1,
                    title: "Understanding Cost Escalation in Tanzanian Construction Projects",
                    slug: "cost-escalation-tanzania",
                    excerpt: "Learn about the key factors driving cost escalation in construction projects and strategies to mitigate financial risks during project execution.",
                    content: "",
                    category: "cost-management",
                    image: "https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&q=80",
                    author: "QS Kashebo J. Rwezaula",
                    authorPhoto: "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200&q=80",
                    date: "2024-12-15",
                    featured: true,
                    published: true
                },
                {
                    id: 2,
                    title: "New AQRB Regulations: What Contractors Need to Know",
                    slug: "aqrb-regulations-2024",
                    excerpt: "A comprehensive guide to the latest regulations from the Architects and Quantity Surveyors Registration Board and their impact on construction projects.",
                    content: "",
                    category: "regulations",
                    image: "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=800&q=80",
                    author: "QS John Mwakasege",
                    authorPhoto: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200&q=80",
                    date: "2024-12-10",
                    featured: false,
                    published: true
                },
                {
                    id: 3,
                    title: "Project Spotlight: Morogoro Central Market Development",
                    slug: "morogoro-market-spotlight",
                    excerpt: "An in-depth look at our role in the World Bank-funded Morogoro Central Market project, showcasing our cost management expertise.",
                    content: "",
                    category: "project-spotlight",
                    image: "https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800&q=80",
                    author: "QS Sarah Kimaro",
                    authorPhoto: "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=200&q=80",
                    date: "2024-12-05",
                    featured: false,
                    published: true
                },
                {
                    id: 4,
                    title: "Construction Industry Outlook for Tanzania 2025",
                    slug: "construction-outlook-2025",
                    excerpt: "Analysis of emerging trends, opportunities, and challenges facing the Tanzanian construction industry in the coming year.",
                    content: "",
                    category: "industry-insights",
                    image: "https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&q=80",
                    author: "QS Kashebo J. Rwezaula",
                    authorPhoto: "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200&q=80",
                    date: "2024-11-28",
                    featured: false,
                    published: true
                },
                {
                    id: 5,
                    title: "KJ & Associates Celebrates 17 Years of Excellence",
                    slug: "17-years-anniversary",
                    excerpt: "Reflecting on our journey, achievements, and commitment to delivering quality quantity surveying services in Tanzania.",
                    content: "",
                    category: "company-news",
                    image: "https://images.unsplash.com/photo-1521737711867-e3b97375f902?w=800&q=80",
                    author: "KJ & Associates Team",
                    authorPhoto: "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200&q=80",
                    date: "2024-11-20",
                    featured: false,
                    published: true
                },
                {
                    id: 6,
                    title: "5 Tips for Effective Construction Budget Management",
                    slug: "budget-management-tips",
                    excerpt: "Practical advice from our experts on maintaining budget control throughout your construction project lifecycle.",
                    content: "",
                    category: "cost-management",
                    image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=800&q=80",
                    author: "QS John Mwakasege",
                    authorPhoto: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200&q=80",
                    date: "2024-11-15",
                    featured: false,
                    published: true
                }
            ];
        }

        // Render blog posts
        function renderBlogPosts() {
            const grid = document.getElementById('blogGrid');
            const noPosts = document.getElementById('noPosts');
            const searchTerm = document.getElementById('blogSearch').value.toLowerCase();
            
            // Filter posts
            let filteredPosts = allPosts.filter(post => {
                if (!post.published) return false;
                
                const matchesCategory = currentCategory === 'all' || post.category === currentCategory;
                const matchesSearch = !searchTerm || 
                    post.title.toLowerCase().includes(searchTerm) || 
                    post.excerpt.toLowerCase().includes(searchTerm);
                
                return matchesCategory && matchesSearch;
            });
            
            // Sort by date (newest first)
            filteredPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (filteredPosts.length === 0) {
                grid.innerHTML = '';
                noPosts.style.display = 'block';
                document.getElementById('blogPagination').innerHTML = '';
                return;
            }
            
            noPosts.style.display = 'none';
            
            // Pagination
            const totalPages = Math.ceil(filteredPosts.length / postsPerPage);
            const startIndex = (currentPage - 1) * postsPerPage;
            const paginatedPosts = filteredPosts.slice(startIndex, startIndex + postsPerPage);
            
            // Find featured post for first page
            const featuredPost = currentPage === 1 && currentCategory === 'all' && !searchTerm
                ? filteredPosts.find(p => p.featured)
                : null;
            
            let html = '';
            
            // Render featured post
            if (featuredPost) {
                html += `
                    <article class="featured-post">
                        <div class="post-image">
                            <img src="${featuredPost.image}" alt="${featuredPost.title}" onerror="this.src='https://via.placeholder.com/800x400?text=No+Image'">
                        </div>
                        <div class="post-content">
                            <span class="featured-badge">‚≠ê Featured Article</span>
                            <span class="post-category">${formatCategory(featuredPost.category)}</span>
                            <h2 class="post-title">${featuredPost.title}</h2>
                            <p class="post-excerpt">${featuredPost.excerpt}</p>
                            <div class="post-meta">
                                <div class="post-author">
                                    <img src="${featuredPost.authorPhoto}" alt="${featuredPost.author}" onerror="this.src='https://via.placeholder.com/32?text=?'">
                                    <span>${featuredPost.author}</span>
                                </div>
                                <span class="post-date"><i data-lucide="calendar" class="inline-icon"></i> ${formatDate(featuredPost.date)}</span>
                            </div>
                            <a href="post.html?slug=${featuredPost.slug}" class="read-more-link">
                                Read Full Article
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </a>
                        </div>
                    </article>
                `;
            }
            
            // Render regular posts (exclude featured if shown)
            const regularPosts = featuredPost 
                ? paginatedPosts.filter(p => p.id !== featuredPost.id)
                : paginatedPosts;
            
            regularPosts.forEach(post => {
                html += `
                    <article class="blog-card" data-category="${post.category}">
                        <div class="post-image">
                            <img src="${post.image}" alt="${post.title}" onerror="this.src='https://via.placeholder.com/400x220?text=No+Image'">
                        </div>
                        <div class="post-content">
                            <span class="post-category">${formatCategory(post.category)}</span>
                            <h3 class="post-title">${post.title}</h3>
                            <p class="post-excerpt">${post.excerpt}</p>
                            <div class="post-meta">
                                <div class="post-author">
                                    <img src="${post.authorPhoto}" alt="${post.author}" onerror="this.src='https://via.placeholder.com/32?text=?'">
                                    <span>${post.author}</span>
                                </div>
                                <span class="post-date"><i data-lucide="calendar" class="inline-icon"></i> ${formatDate(post.date)}</span>
                            </div>
                            <a href="post.html?slug=${post.slug}" class="read-more-link">
                                Read More
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                            </a>
                        </div>
                    </article>
                `;
            });
            
            grid.innerHTML = html;
            renderPagination(totalPages);
        }

        // Render pagination
        function renderPagination(totalPages) {
            const pagination = document.getElementById('blogPagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let html = '';
            
            // Previous button
            html += `
                <button class="pagination-btn nav-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                    Prev
                </button>
            `;
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += `<span class="pagination-btn" style="border: none; cursor: default;">...</span>`;
                }
            }
            
            // Next button
            html += `
                <button class="pagination-btn nav-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                </button>
            `;
            
            pagination.innerHTML = html;
        }

        // Change page
        function changePage(page) {
            if (page < 1) return;
            currentPage = page;
            renderBlogPosts();
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }

        // Filter by category
        function filterByCategory(category) {
            currentCategory = category;
            currentPage = 1;
            
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
            
            renderBlogPosts();
        }

        // Filter by search
        function filterBlogPosts() {
            currentPage = 1;
            renderBlogPosts();
        }

        // Format category name
        function formatCategory(category) {
            const categories = {
                'industry-insights': 'Industry Insights',
                'project-spotlight': 'Project Spotlight',
                'cost-management': 'Cost Management',
                'regulations': 'Regulations',
                'company-news': 'Company News'
            };
            return categories[category] || category;
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', loadBlogPosts);
    </script>
    <!-- Initialize Lucide Icons -->
    <script>lucide.createIcons();</script>
</body>
</html>

